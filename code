import random
from words import words
import string
import emoji
import os
from time import sleep


def palavra_valida(words,lista_palavras_usadas):

    palavra = random.choice(words)
    
    

    while "-" in palavra or " " in palavra or len(palavra) > 14 or palavra in lista_palavras_usadas:
        palavra = random.choice(words)
        
        
    lista_palavras_usadas.append(palavra)
    return palavra.upper()
            
        
    

def jogo_da_forca(pontos):
    lista_palavras_usadas = []
    palavra = palavra_valida(words,lista_palavras_usadas) #pegando uma palavra válida da lista
    letras_palavra = set(palavra) #criando uma coleção com as letras da palavra
    alfabeto = set(string.ascii_uppercase) #definindo os caracteres válidos em UPPERCASE
    letras_usadas = set() # coleção que irá ser incrementada com o decorrer do programa
    vida = 10
    print(lista_palavras_usadas)
    
    while vida > 0  and len(letras_palavra) > 0: #loop que irá funcionar até ser zerada a coleção de letras da palavra ou as vidas

        
        print(emoji.emojize(f"Vidas({vida}): "+ vida*":heart: ", language='alias'))

        print("Letras usadas -> "," ".join(letras_usadas)) #mostrar as letras usadas pelo usuário até o momento

        mostrar_lista_letras = [letra_usuario if letra_usuario in letras_usadas else "-" for letra_usuario in palavra]
        print("Palavra atual -> ", "".join(mostrar_lista_letras))


        letra_usuario = input("Chute uma letra: ").upper() 
        

        if letra_usuario in alfabeto - letras_usadas: #condição que adicionará a letra digitada a lista de letras digitadas
            letras_usadas.add(letra_usuario)
            os.system("cls")
            if letra_usuario in letras_palavra:#condição que irá reduzindo as letras da palavra até que chegue a zero
                letras_palavra.remove(letra_usuario)
            else:
                vida -= 1
                os.system("cls")
                print("Essa letra não pertence a palavra, -1 vida")
                
        elif letra_usuario in letra_usuario:
            os.system("cls")
            print("Você já digitou essa letra, tente novamente")
            
        else:
            os.system("cls")
            print("Você não digitou uma letra válida, tente novamente")
            
    print(f"A palavra é: {palavra}")
    print(f"Pontos feitos: {vida}")
    sleep(3)
    os.system("cls")
    pontos = vida
    return pontos
    
    

num_times = int(input("Quantos times irão jogar? "))
cont = 0
pont_final_times = [0] * num_times

while cont < 1:
    cont+=1
    for i in range(0,num_times):
        pontos = 0
        print(f"Rodada {cont} / time[{i+1}]: \n")
        pont_final_times[i] = jogo_da_forca(pontos)
        


os.system("cls")
print("Pontuação final: \n")
pontos_vencedor = 0
numero_vencedor = 0
for i in range(0,num_times):
    
    if pont_final_times[i] > pontos_vencedor:
        pontos_vencedor = pont_final_times[i]
        numero_vencedor = i+1
        print(f"Time {i+1} = {pont_final_times[i]} pontos\n")
    else:
        print(f"Time {i+1} = {pont_final_times[i]} pontos\n")
